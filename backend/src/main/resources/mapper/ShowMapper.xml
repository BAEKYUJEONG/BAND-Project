<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.web.blog.mapper.ShowMapper">
	<select id="getShowByTime" resultType="BandShow">
		select * from bandshow where date=#{date} and time=#{time};
	</select>
	
	<insert id="addshow" parameterType="BandShow">
		insert into bandshow values(null,#{date}, #{title},#{time},#{showContent},#{bandId});
	</insert>
	
	<delete id="delshow">
		delete from bandshow where showId=#{showId};
	</delete>
	
	<select id="showlist" resultType="ShowListRes">
		select showId,date,title,date_format(time,'%H:%i')as time,showContent from bandshow where bandId=#{bandId};
	</select>
	
	<select id="dateshowlist" resultType="BandShowlist">
		select bandshow.*,band.name,band.img as img, 0 as shows from bandshow,band where date=#{date} and bandshow.bandId=band.bandId
		order by time;
	</select>
	
	<update id="updateshow">
		update bandshow set title=#{title},showContent=#{showContent} where showId=#{showId}
	</update>
	
	
	<!-- <select id="getShowByTime1" resultType="BandShow">
		select * from bandshow where time=#{time};
	</select> -->
	
	
</mapper>